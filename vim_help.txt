:u - отмена последнего действия (undo)

Замена по тексту:
:s/<что меняем>/<на что меняем> - замена в пределах строки
:%s/<что меняем>/<на что меняем> - замена по всему файлу

Визуальный режим:
V - вызов визуального в текущей позиции курсора
v -
up/down - выделение группы строк (блока кода)
> - сдвиг группы строк вправо